<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation Tycoon V2</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #2c3e50;
            color: white;
            text-align: center;
            user-select: none;
        }

        .container {
            max-width: 600px;
            margin: 30px auto;
            background: #34495e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        h1 { margin-top: 0; color: #f1c40f; }

        /* The Big Score Display */
        .score-board {
            background: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #f1c40f;
        }

        #score {
            font-size: 3rem;
            font-weight: bold;
            color: #2ecc71;
        }

        /* The Morale Officer (Cat) Display */
        #mascot-container {
            margin: 20px 0;
            display: none; /* Hidden until you buy it */
            border: 4px solid #e67e22;
            padding: 10px;
            border-radius: 10px;
            background: #2c3e50;
        }

        #mascot-img {
            max-width: 100%;
            border-radius: 5px;
            height: 200px;
            object-fit: cover;
        }

        /* The Main Button */
        .click-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 0 #c0392b;
            transition: all 0.1s;
            margin-bottom: 30px;
        }

        .click-btn:active {
            box-shadow: 0 0 0 #c0392b;
            transform: translateY(8px);
        }

        /* Upgrades Section */
        .shop {
            display: grid;
            gap: 10px;
            text-align: left;
        }

        .upgrade-btn {
            background-color: #95a5a6;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            color: #2c3e50;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .disabled { opacity: 0.5; cursor: not-allowed; }
        .affordable { background-color: #3498db; color: white; box-shadow: 0 4px 0 #2980b9; }
        
        /* Special Gold Button for the API */
        .special-btn {
            background: linear-gradient(45deg, #f1c40f, #e67e22);
            color: white;
            border: 2px solid #fff;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Transformation Tycoon</h1>
        <p>Lead the change! Click to gain Buy-In.</p>

        <div class="score-board">
            <div>Stakeholder Buy-In</div>
            <div id="score">0</div>
            <div style="font-size: 0.9rem; color: #bdc3c7; margin-top: 5px;">
                per second: <span id="sps">0</span>
            </div>
        </div>
        
        <div id="mascot-container">
            <h3 style="margin: 0 0 10px 0; color: #e67e22;">CHIEF MORALE OFFICER</h3>
            <img id="mascot-img" src="" alt="Office Cat">
            <p style="font-size: 0.8rem; font-style: italic;">"Purr-formance review: Excellent"</p>
        </div>

        <button class="click-btn" onclick="clickWork()">HOST<br>MEETING</button>

        <div class="shop">
            <button id="btn-coffee" class="upgrade-btn disabled" onclick="buyUpgrade('coffee')">
                <span>‚òï Buy Team Coffee (+1/sec)</span>
                <span>Cost: 15</span>
            </button>
            
            <button id="btn-intern" class="upgrade-btn disabled" onclick="buyUpgrade('intern')">
                <span>üéì Hire Grad Intern (+5/sec)</span>
                <span>Cost: 100</span>
            </button>

            <button id="btn-cat" class="upgrade-btn special-btn disabled" onclick="hireCat()">
                <span>üê± Recruit Morale Officer (+50/sec)</span>
                <span>Cost: 1000</span>
            </button>
        </div>
    </div>

    <script>
        // --- VARIABLES ---
        let buyInPoints = 0;
        let pointsPerSecond = 0;
        
        let coffeeCost = 15;
        let internCost = 100;
        let catCost = 1000;
        let hasCat = false; // You can only hire one cat!

        // --- FUNCTIONS ---

        function clickWork() {
            buyInPoints++;
            updateUI();
        }

        function buyUpgrade(type) {
            if (type === 'coffee' && buyInPoints >= coffeeCost) {
                buyInPoints -= coffeeCost;
                pointsPerSecond += 1;
                coffeeCost = Math.floor(coffeeCost * 1.5);
            } 
            else if (type === 'intern' && buyInPoints >= internCost) {
                buyInPoints -= internCost;
                pointsPerSecond += 5;
                internCost = Math.floor(internCost * 1.5);
            }
            updateUI();
        }

        // --- THE API FUNCTION ---
        async function hireCat() {
            if (buyInPoints >= catCost && !hasCat) {
                
                // 1. Pay the cost
                buyInPoints -= catCost;
                
                // 2. Fetch the Cat Image
                const btnText = document.querySelector('#btn-cat span:first-child');
                btnText.innerText = "‚è≥ Interviewing Cats...";
                
                try {
                    const response = await fetch('https://api.thecatapi.com/v1/images/search');
                    const data = await response.json();
                    
                    // 3. Show the image
                    document.getElementById('mascot-img').src = data[0].url;
                    document.getElementById('mascot-container').style.display = 'block';
                    
                    // 4. Apply Bonus
                    pointsPerSecond += 50;
                    hasCat = true;
                    
                    // 5. Disable the button (Job Filled)
                    document.getElementById('btn-cat').classList.add('disabled');
                    btnText.innerText = "‚úÖ Position Filled";
                    
                } catch (error) {
                    alert("The cat refused to sign the contract. (API Error)");
                }
            }
            updateUI();
        }

        // --- GAME LOOP ---
        setInterval(function() {
            buyInPoints += pointsPerSecond;
            updateUI();
        }, 1000);

        function updateUI() {
            document.getElementById('score').innerText = buyInPoints;
            document.getElementById('sps').innerText = pointsPerSecond;

            updateButton('btn-coffee', coffeeCost, buyInPoints);
            updateButton('btn-intern', internCost, buyInPoints);
            
            // Special check for the Cat button
            const catBtn = document.getElementById('btn-cat');
            if (!hasCat) {
                const spans = catBtn.getElementsByTagName('span');
                spans[1].innerText = "Cost: " + catCost;
                
                if (buyInPoints >= catCost) {
                    catBtn.classList.remove('disabled');
                    catBtn.classList.add('affordable');
                } else {
                    catBtn.classList.add('disabled');
                    catBtn.classList.remove('affordable');
                }
            }
        }

        function updateButton(id, cost, currentPoints) {
            const btn = document.getElementById(id);
            const spans = btn.getElementsByTagName('span');
            spans[1].innerText = "Cost: " + cost;

            if (currentPoints >= cost) {
                btn.classList.remove('disabled');
                btn.classList.add('affordable');
            } else {
                btn.classList.add('disabled');
                btn.classList.remove('affordable');
            }
        }
    </script>
</body>
</html>